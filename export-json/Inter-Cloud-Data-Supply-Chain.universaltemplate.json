{
    "agent": null,
    "agentCluster": null,
    "agentClusterVar": null,
    "agentFieldsRestriction": "No Restriction",
    "agentType": "Linux/Unix",
    "agentVar": null,
    "automaticOutputRetrievalFieldsRestriction": "No Restriction",
    "broadcastCluster": null,
    "broadcastClusterVar": null,
    "createConsole": false,
    "credentialFieldsRestriction": "No Restriction",
    "credentials": null,
    "credentialsVar": null,
    "description": "v0.3",
    "desktopInteract": false,
    "elevateUser": false,
    "environment": [],
    "environmentVariablesFieldsRestriction": "No Restriction",
    "exitCodeOutput": null,
    "exitCodeProcessing": "Success Exitcode Range",
    "exitCodeProcessingFieldsRestriction": "No Restriction",
    "exitCodeText": null,
    "exitCodes": "0",
    "fields": [
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [
                {
                    "fieldValue": "lsd",
                    "fieldValueLabel": "list directory",
                    "sequence": 0,
                    "sysId": "d63f6e3005c74b3f9d8f7d42abaecf38",
                    "useFieldValueForLabel": false
                },
                {
                    "fieldValue": "copy",
                    "fieldValueLabel": "copy",
                    "sequence": 1,
                    "sysId": "29fb3f2561c843ed8725bd792eb19262",
                    "useFieldValueForLabel": false
                },
                {
                    "fieldValue": "list-objects",
                    "fieldValueLabel": "List objects",
                    "sequence": 2,
                    "sysId": "6eb7885540354a18867388383b0e6522",
                    "useFieldValueForLabel": false
                },
                {
                    "fieldValue": "move",
                    "sequence": 3,
                    "sysId": "a9800480575245b8b6d01e5805efeb0d",
                    "useFieldValueForLabel": true
                }
            ],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Choice Field 1",
            "fieldType": "Choice",
            "fieldValue": "lsd",
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Action",
            "name": "action",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 0,
            "showIfField": null,
            "showIfFieldValue": null,
            "sysId": "eb6d22edb906482f8ca002e1d39ce93f"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [
                {
                    "fieldValue": "INFO",
                    "sequence": 0,
                    "sysId": "d50ab2ed15894a439105731df862219b",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "DEBUG",
                    "sequence": 1,
                    "sysId": "60c9c38fd9844f849ce2ac81b32bafb5",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "WARNING",
                    "sequence": 2,
                    "sysId": "d2a8d94a49d541a39426e3f5ab4d3d60",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "ERROR",
                    "sequence": 3,
                    "sysId": "6d70a9dfb1f948f28757014266de30e0",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "CRITICAL",
                    "sequence": 4,
                    "sysId": "99e2596bb3824e68a24b66dfacd684ef",
                    "useFieldValueForLabel": true
                }
            ],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Choice Field 2",
            "fieldType": "Choice",
            "fieldValue": "INFO",
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Loglevel",
            "name": "loglevel",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 1,
            "showIfField": null,
            "showIfFieldValue": null,
            "sysId": "7249a509d6194b8d80bd283477d327cd"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Script Field 1",
            "fieldType": "Script",
            "fieldValue": "cloud2cloud.conf",
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Connection File",
            "name": "rclone_conf",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 2,
            "showIfField": null,
            "showIfFieldValue": null,
            "sysId": "e50a3a276a984599b6ba1212f3dd3cd1"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [
                {
                    "fieldValue": "amazon_s3:",
                    "sequence": 0,
                    "sysId": "be740f71c24b4e9caebfe6e667da81ae",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "google_cloud_storage:",
                    "sequence": 1,
                    "sysId": "6e9b5eada1d349459285352a0b93b145",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "microsoft_azure_blob_storage:",
                    "sequence": 2,
                    "sysId": "65a9f31de0674e31bec1adbbd63c24e4",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "linux",
                    "fieldValueLabel": "linux",
                    "sequence": 3,
                    "sysId": "10688b9e34dc4dc794a7cabbab109443",
                    "useFieldValueForLabel": false
                },
                {
                    "fieldValue": "onedrive:",
                    "sequence": 4,
                    "sysId": "6c5efd94e1264e5baefa4894b730d85d",
                    "useFieldValueForLabel": true
                }
            ],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Choice Field 3",
            "fieldType": "Choice",
            "fieldValue": "amazon_s3:",
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Storage Type",
            "name": "storage_type",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 3,
            "showIfField": "Choice Field 1",
            "showIfFieldValue": "list-objects,lsd",
            "sysId": "0dec93477e93415ab6398c46ffddaf07"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [
                {
                    "fieldValue": "amazon_s3:",
                    "sequence": 0,
                    "sysId": "fa70ff56790647559e352ab77f0de94c",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "google_cloud_storage:",
                    "sequence": 1,
                    "sysId": "61ba123cccab47d7ba2e35bc38f51e75",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "microsoft_azure_blob_storage:",
                    "sequence": 2,
                    "sysId": "47ffb52da85e4c3ea2c456ad6ee037e1",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "linux",
                    "fieldValueLabel": "linux",
                    "sequence": 3,
                    "sysId": "e398b6947fa94d248cc29a0a6f502da1",
                    "useFieldValueForLabel": false
                },
                {
                    "fieldValue": "onedrive:",
                    "sequence": 4,
                    "sysId": "876a525849fa4a5b8f689a3997a1cfc6",
                    "useFieldValueForLabel": true
                }
            ],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Choice Field 4",
            "fieldType": "Choice",
            "fieldValue": "amazon_s3:",
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Source Storage Type",
            "name": "source_storage_type",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 4,
            "showIfField": "Choice Field 1",
            "showIfFieldValue": "copy,move",
            "sysId": "6020ba8cf85247a293f8674803fc2e06"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [
                {
                    "fieldValue": "amazon_s3:",
                    "sequence": 0,
                    "sysId": "6a69a99c0c524ab390219e86410c1609",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "google_cloud_storage:",
                    "sequence": 1,
                    "sysId": "f48d5112d73e4218a062ca40b5794b96",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "microsoft_azure_blob_storage:",
                    "sequence": 2,
                    "sysId": "3d932f80692d4af486ccc3958d6f2695",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "linux",
                    "sequence": 3,
                    "sysId": "95f5a833e36341cd8c6b2b4d8706da30",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "onedrive:",
                    "sequence": 4,
                    "sysId": "531d1de5a3a54163910e977141e68065",
                    "useFieldValueForLabel": true
                }
            ],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Choice Field 5",
            "fieldType": "Choice",
            "fieldValue": "amazon_s3",
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Target Storage Type",
            "name": "target_storage_type",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 5,
            "showIfField": "Choice Field 1",
            "showIfFieldValue": "copy,move",
            "sysId": "a663f6e51a1c496da149cd54acd999a0"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Text Field 1",
            "fieldType": "Text",
            "fieldValue": null,
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": "directory, file, container, bucket",
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Source",
            "name": "source",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 6,
            "showIfField": "Choice Field 1",
            "showIfFieldValue": "copy,move",
            "sysId": "54bba996bec54e68b4b9de73fd203ce4"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Text Field 2",
            "fieldType": "Text",
            "fieldValue": null,
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": "directory, file, container, bucket",
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Target",
            "name": "target",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 7,
            "showIfField": "Choice Field 1",
            "showIfFieldValue": "copy,move",
            "sysId": "a851e2e5f3204aa3be41b5c8cbf42166"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Text Field 3",
            "fieldType": "Text",
            "fieldValue": null,
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": "bucket name, container name, file system directory",
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Directory",
            "name": "directory",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 8,
            "showIfField": "Choice Field 1",
            "showIfFieldValue": "list-objects",
            "sysId": "03db93ac98524e3eb3c2bc3091fda131"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Text Field 4",
            "fieldType": "Text",
            "fieldValue": null,
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "UAC Base URL",
            "name": "base_url_uac",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 9,
            "showIfField": null,
            "showIfFieldValue": null,
            "sysId": "242e9ab2143e4fcbb01a174a0b28f5e5"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Credential Field 1",
            "fieldType": "Credential",
            "fieldValue": null,
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "UAC Rest Credentials",
            "name": "rest_credentials_uac",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 10,
            "showIfField": null,
            "showIfFieldValue": null,
            "sysId": "9067aa637a2a43ea9dcb53358f9fc42e"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Text Field 5",
            "fieldType": "Text",
            "fieldValue": null,
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Filter",
            "name": "filter",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 11,
            "showIfField": "Choice Field 6",
            "showIfFieldValue": "include",
            "sysId": "969b4d3019b9433c8b506462a4bebe86"
        },
        {
            "arrayNameTitle": null,
            "arrayValueTitle": null,
            "booleanNoValue": null,
            "booleanValueType": "true/false",
            "booleanYesValue": null,
            "choiceAllowEmpty": false,
            "choiceAllowMultiple": false,
            "choiceSortOption": "Sequence",
            "choices": [
                {
                    "fieldValue": "none",
                    "sequence": 0,
                    "sysId": "c1b9631745094c4c90410701c7dc77fc",
                    "useFieldValueForLabel": true
                },
                {
                    "fieldValue": "include",
                    "sequence": 1,
                    "sysId": "3e807eb947d14b099280b15047d967f7",
                    "useFieldValueForLabel": true
                }
            ],
            "defaultListView": false,
            "fieldLength": null,
            "fieldMapping": "Choice Field 6",
            "fieldType": "Choice",
            "fieldValue": "none",
            "formColumnSpan": 1,
            "formEndRow": false,
            "formStartRow": false,
            "hint": null,
            "intFieldMax": null,
            "intFieldMin": null,
            "label": "Filter Type",
            "name": "filter_type",
            "noSpaceIfHidden": false,
            "requireIfField": null,
            "requireIfFieldValue": null,
            "requireIfVisible": false,
            "required": false,
            "sequence": 12,
            "showIfField": null,
            "showIfFieldValue": null,
            "sysId": "91a171c606734370bf810c79ee670be0"
        }
    ],
    "name": "Inter-Cloud-Data-Supply-Chain",
    "outputFailureOnly": false,
    "outputReturnFile": null,
    "outputReturnNline": "100",
    "outputReturnSline": "1",
    "outputReturnText": null,
    "outputReturnType": "NONE",
    "outputType": "STDOUT",
    "runtimeDir": null,
    "script": null,
    "scriptTypeWindows": null,
    "scriptUnix": "#!/opt/universal/python3.6/bin/python3\n#\n#\n#    Name   : cloud2cloud.py\n#    Origins: Stonebranch\n#    Author : Nils Buer, Abdullah Saglam\n#    Date   : 01-02-2021\n#\n#    Requires Universal Agent for Linux/Windows\n#\n#    Copyright (c) Stonebranch, 2020.  All rights reserved.\n#\n#    Purpose: Start an Informatica WF or Task\n#\n#    Prerequisites:\n#     - Universal Agent for Windows/Linux 6.9 or higher\n#\n#\n#     Version History:\n#     0.1  Nils              01-02-2021   initial\n#     0.2  Abdullah/Nils     01-02-2021   credentials for script added\n#     0.x  Nils              01-02-2021   initial\n#     0.x  Nils              01-02-2021   initial\n#     0.3  Nils              02-02-2021   initial\n#     0.4  Nils              04-02-2021   filter\n#\n#\n# Used modules\n\nimport logging\nimport site\nimport subprocess\nimport sys\n\nimport requests\n\ngl_version = \"0.4\"\ngl_variable_prefix = \"var\"\n\n# Task Variables\ngl_action = \"${ops_var_action}\"\ngl_rclone_conf = \"${ops_var_rclone_conf}\"\ngl_storage_type = \"${ops_var_storage_type}\"\ngl_source_storage_type = \"\" if \"${ops_var_source_storage_type}\" == \"linux\" else \"${ops_var_source_storage_type}\"\ngl_target_storage_type = \"\" if \"${ops_var_target_storage_type}\" == \"linux\" else \"${ops_var_target_storage_type}\"\ngl_source = \"${ops_var_source}\"\ngl_target = \"${ops_var_target}\"\ngl_directory = \"${ops_var_directory}\"\ngl_rclone_conf_path = \"${_scriptPath('${ops_var_rclone_conf}')}\"\ngl_base_url_uac = \"${ops_var_base_url_uac}\".rstrip(\" /\")\ngl_auth_uac = (\"${_credentialUser('${ops_var_rest_credentials_uac}')}\",\n               \"${_credentialPwd('${ops_var_rest_credentials_uac}')}\")\n\n# gl_base_url_uac = \"${ops_var_base_url_uac}\".rstrip(\" /\")\n# gl_auth_uac = (\"${_credentialUser('${ops_var_rest_credentials_uac}')}\",\"${_credentialPwd('${ops_var_rest_credentials_uac}')}\")\ngl_sb_rest = None\ngl_filter = \"${ops_var_filter}\"\ngl_filter_type = \"${ops_var_filter_type}\"\n\n# -- logging settings DEBUG, INFO, WARNING, ERROR, CRITICAL\n\nlogging.basicConfig(level=\"${ops_var_loglevel}\",\n                    format=' %(asctime)s - %(levelname)s - %(message)s')\n\n\ndef main():\n    global gl_sb_rest\n    print_variables()\n    gl_sb_rest = SbRestApi(gl_base_url_uac, gl_auth_uac)\n    if gl_action == \"lsd\":\n        list_directory(gl_storage_type)\n        pass\n    elif gl_action == \"list-objects\":\n        list_objects(gl_storage_type, gl_directory)\n        pass\n\n    elif gl_action == \"copy\":\n        copy_new(gl_source_storage_type, gl_target_storage_type, gl_source,\n                 gl_target, gl_filter_type, gl_filter)\n        pass\n\n    elif gl_action == \"move\":\n        move_new(gl_source_storage_type, gl_target_storage_type, gl_source,\n                 gl_target, gl_filter_type, gl_filter)\n        pass\n\n\ndef print_variables():\n    \"\"\"logging.infos out the python and script version\n    and all universal template variables\n    \"\"\"\n    logging.info(\"Python version <<< \" + sys.version + \" >>>\")\n    logging.info(\"Python sites <<< \" + str(site.getsitepackages()) + \" >>>\")\n    logging.info(\"Executing task version \" + gl_version + \" with the following \"\n                                                          \"parameters\")\n    print_defined_variables(gl_variable_prefix)\n\n\ndef print_defined_variables(variable_prefix):\n    \"\"\"logging.infos out universal template variables\"\"\"\n    all_variables = r\"${_scope}\"\n    separate_variables = [variable for variable in all_variables.split(', ') if\n                          \"ops_\" + variable_prefix in variable]\n    logging.info(str(separate_variables).replace(\", \", \",\\n\"))\n\n\ndef list_directory(storage_type):\n    \"\"\" list the directory of the given connection type e.g., buckets, containes .. \"\"\"\n    # rclone lsd google:\n    try:\n        process = subprocess.check_output(\n            ['rclone', '--config', gl_rclone_conf_path, 'lsd', storage_type])\n    except subprocess.CalledProcessError as e:\n        print(e.output)\n        logging.error(\"Error Code: \" + str(e.returncode))\n        exit(1)\n\n    out = process.decode(encoding='utf-8', errors='ignore')\n    print(f\"######  {storage_type} Container / buckets ######\")\n    print(out)\n\n\ndef list_objects(storage_type, directory):\n    \"\"\" list the objects in a directory of the given connection type e.g. s3 keys in a bucket\"\"\"\n    # rclone ls azure:stonebranchpm\n    try:\n        process = subprocess.check_output(\n            ['rclone', '--config', gl_rclone_conf_path, 'ls',\n             storage_type + directory\n             ]\n        )\n    except  subprocess.CalledProcessError as e:\n        print(e.output)\n        logging.error(\"Error Code: \" + str(e.returncode))\n        exit(1)\n\n    out = process.decode(encoding='utf-8', errors='ignore')\n    print(f\"######  objects in: {directory} ######\")\n    print(out)\n\n\ndef copy(source_storage_type, target_storage_type, source, target):\n    \"\"\" Copy files from source to dest, skipping already copied.\"\"\"\n    # rclone copy --progress s3:stonebranchpm / test1.txt s3:stonebranchpmtest\n    try:\n        process = subprocess.check_output(\n            ['rclone', '--config', gl_rclone_conf_path,\n             'copy', '--progress',\n             source_storage_type + source,\n             target_storage_type + target\n             ]\n        )\n    except  subprocess.CalledProcessError as e:\n        print(e.output)\n        logging.error(\"Error Code: \" + str(e.returncode))\n        exit(1)\n\n    out = process.decode(encoding='utf-8', errors='ignore')\n    print(\"############  copy action ###############\")\n    print(out)\n\n\ndef copy_new(source_storage_type, target_storage_type, source, target, filter_type, filter):\n    \"\"\" Copy files from source to dest, skipping already copied.\"\"\"\n    # rclone copy --progress s3:stonebranchpm / test1.txt s3:stonebranchpmtest\n    try:\n        print(\"############  copy action ###############\")\n        cmd = ['rclone', '--config', gl_rclone_conf_path,\n               'copy', '--progress',\n               source_storage_type + source,\n               target_storage_type + target\n               ]\n        if filter_type != \"none\":\n            cmd += [\"--\" + filter_type, filter]\n        logging.debug(cmd)\n        execute(cmd)\n    except  subprocess.CalledProcessError as e:\n        print(e.output)\n        logging.error(\"Error Code: \" + str(e.returncode))\n        exit(1)\n\n    # out = process.decode(encoding='utf-8', errors='ignore')\n    # print(\"############  copy action ###############\")\n    # print(out)\n\n\ndef move(source_storage_type, target_storage_type, source, target):\n    \"\"\" Copy files from source to dest, skipping already copied.\"\"\"\n    # rclone move --progress s3:stonebranchpm / test1.txt s3:stonebranchpmtest\n    try:\n        process = subprocess.check_output(\n            ['rclone', '--config', gl_rclone_conf_path,\n             'move', '--progress',\n             source_storage_type + source,\n             target_storage_type + target\n             ]\n        )\n    except  subprocess.CalledProcessError as e:\n        print(e.output)\n        logging.error(\"Error Code: \" + str(e.returncode))\n        exit(1)\n\n    out = process.decode(encoding='utf-8', errors='ignore')\n    print(\"############  move action ###############\")\n    print(out)\n\n\ndef move_new(source_storage_type, target_storage_type, source, target, filter_type, filter):\n    \"\"\" Copy files from source to dest, skipping already copied.\"\"\"\n    # rclone move --progress s3:stonebranchpm / test1.txt s3:stonebranchpmtest\n    try:\n        print(\"############  move action ###############\")\n        cmd = ['rclone', '--config', gl_rclone_conf_path,\n               'move', '--progress',\n               source_storage_type + source,\n               target_storage_type + target\n               ]\n        if filter_type != \"none\":\n            cmd += [\"--\" + filter_type, filter]\n        logging.debug(cmd)\n        execute(cmd)\n    except  subprocess.CalledProcessError as e:\n        print(e.output)\n        logging.error(\"Error Code: \" + str(e.returncode))\n        exit(1)\n\n\ndef execute(cmd):\n    pipe_open = subprocess.Popen(cmd, stdout=subprocess.PIPE,\n                                 universal_newlines=True)\n    for stdout_line in iter(pipe_open.stdout.readline, \"\"):\n        print(stdout_line)\n        if \"Transferred:\" in stdout_line and \"ETA\" in stdout_line:\n            op_memo_text = stdout_line[\n                           stdout_line.index(\"Transferred:\") + 12:].strip()\n            gl_sb_rest.update_task_op_memo(op_memo_text)\n    pipe_open.stdout.close()\n    return_code = pipe_open.wait()\n    if return_code:\n        raise subprocess.CalledProcessError(return_code, cmd)\n\n\nclass SbRestApi:\n    \"\"\"Stonebranch REST API Class for python\n\n    This class is written for web service operations to UAC\n\n    Attributes:\n        _base_url: base uac url\n        _auth_uac: authentication for uac\n        _library_version: keeps the class library version\n    \"\"\"\n\n    def __init__(self, base_url, authentication):\n        self._base_url = base_url\n        self._auth_uac = authentication\n        self._library_version = \"1.0\"\n        logging.info(\n            \"REST SB library version \" + self._library_version)\n\n    def launch_task(self, data_str):\n        url = '%s/resources/task/ops-task-launch' % self._base_url\n        logging.debug('URL: %s' % url)\n        local_headers = {'content-type': 'application/json'}\n\n        response = requests.post(url, headers=local_headers, data=data_str,\n                                 auth=self._auth_uac, stream=True)\n\n        if 200 != response.status_code:\n            logging.error('Response: %s' % response)\n            logging.error('Response: %s' % response.text)\n            exit(1)\n        else:\n            logging.debug('Response 200 received')\n\n    def update_task_op_memo(self, op_memo_text):\n        logging.info('Updating task operational memo of %s to %s' % (\n            \"${ops_task_id}\", op_memo_text))\n        url = '%s/resources/taskinstance/updatememo?taskinstanceid=${ops_task_id}' % self._base_url\n        logging.debug('URL: %s' % url)\n        local_headers = {'Content-Type': 'text/plain'}\n        response = requests.put(url, headers=local_headers, data=op_memo_text,\n                                auth=self._auth_uac, stream=True, verify=False)\n\n        if 200 != response.status_code:\n            logging.error('Response: %s' % response.text)\n            exit(1)\n        else:\n            logging.debug('Response 200 received %s' % response.text)\n\n        resp_data = None\n        try:\n            resp_data = response.json()\n            # ...\n        except ValueError:\n            # no JSON returned\n            pass\n        logging.debug(\"received data: %s\" % resp_data)\n\n\nif __name__ == '__main__':\n    main()\n",
    "scriptWindows": null,
    "sysId": "93d947a2125142a5a706559aa3d333ac",
    "useCommonScript": false,
    "variablePrefix": "var",
    "waitForOutput": false
}